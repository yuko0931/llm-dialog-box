import{d as b,r as m,j as x,c as l,a,C as y,w as _,t as u,x as k,o as r,_ as B,G as C}from"./index-DQOfbiEJ.js";const z={class:"file-view"},M={key:0,class:"parsing-spinner"},F=["src"],S={class:"file-detail"},G={class:"file-name"},L={key:0,class:"file-size"},j={key:1,class:"file-size"},E=b({__name:"UploadFileView",props:{id:{type:String},name:{type:String},size:{type:String},isparsing:{type:Boolean}},emits:["delete-file"],setup(e,{emit:s}){const o=m(!1),t=x(()=>{var c,f,v;const p="/llm-dialog-box/img/",i=["jpg","png","gif","webp","bmp","pcd","tiff"],d=((v=(f=(c=n.name)==null?void 0:c.toLowerCase())==null?void 0:f.split("."))==null?void 0:v.pop())||"",w=i.includes(d)?"img":"file";return p+w+".svg"}),n=e,g=s,h=()=>{g("delete-file",n.name)};return(p,i)=>(r(),l("div",{class:"file-item",onMouseenter:i[0]||(i[0]=d=>o.value=!0),onMouseleave:i[1]||(i[1]=d=>o.value=!1)},[a("div",z,[e.isparsing?(r(),l("img",{key:1,src:t.value,alt:"file"},null,8,F)):(r(),l("div",M,i[2]||(i[2]=[y('<svg viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" data-icon="spin" data-v-000b30db><defs data-v-000b30db><linearGradient x1="0%" y1="100%" x2="100%" y2="100%" id="linearGradient-1" data-v-000b30db><stop stop-color="currentColor" stop-opacity="0" offset="0%" data-v-000b30db></stop><stop stop-color="currentColor" stop-opacity="0.50" offset="39.9430698%" data-v-000b30db></stop><stop stop-color="currentColor" offset="100%" data-v-000b30db></stop></linearGradient></defs><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" data-v-000b30db><rect fill-opacity="0.01" fill="none" x="0" y="0" width="36" height="36" data-v-000b30db></rect><path d="M34,18 C34,9.163444 26.836556,2 18,2 C11.6597233,2 6.18078805,5.68784135 3.59122325,11.0354951" stroke="url(#linearGradient-1)" stroke-width="4" stroke-linecap="round" data-v-000b30db></path></g></svg>',1)])))]),a("div",S,[a("div",G,u(n.name),1),e.isparsing?(r(),l("div",L,u(n.size),1)):(r(),l("div",j,"解析中...")),_(a("div",{class:"file-delete",onClick:h},i[3]||(i[3]=[a("svg",{width:"8",height:"8",viewBox:"0 0 8 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[a("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.45.549a.777.777 0 0 1 0 1.098L1.648 7.451A.776.776 0 1 1 .55 6.353L6.353.55a.776.776 0 0 1 1.098 0z",fill:"#868686"}),a("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M.55.548a.776.776 0 0 1 1.097 0l5.804 5.805A.777.777 0 0 1 6.353 7.45L.549 1.646a.777.777 0 0 1 0-1.098z",fill:"#868686"})],-1)]),512),[[k,o.value]])])],32))}}),U=B(E,[["__scopeId","data-v-000b30db"]]);async function A(e){return await C.files.upload({file:e})}const V=e=>{if(e===0)return"0 B";const s=1024,o=["B","KB","MB","GB"],t=Math.floor(Math.log(e)/Math.log(s));return parseFloat((e/Math.pow(s,t)).toFixed(2))+" "+o[t]},I=e=>{var t,n;const s=["jpg","png","gif","webp","bmp","pcd","tiff"],o=((n=(t=e==null?void 0:e.toLowerCase())==null?void 0:t.split("."))==null?void 0:n.pop())||"";return s.includes(o)},$=e=>{let s="";const o=[];return e.forEach(t=>{t.type==="text"?s+=t.text:o.push({id:t.file_id,name:t.name,size:V(t.size)})}),{role:"user",content:s,files:o,content_type:"object_string"}};export{U,V as f,I as i,$ as r,A as u};
